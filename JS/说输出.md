### ä½œç”¨åŸŸ
#### 1 ï¼ï¼ï¼
```js
var x=1,y=2;
var z=function() {
  var x= 2
  return {
    x: x,
    y: function(a,b) {
      // æ³¨æ„è¿™é‡Œçš„xå¼•ç”¨çš„æ˜¯å¤–å±‚å‡½æ•°çš„x æ˜¯é—­åŒ…å˜é‡
      // å’Œthisä¸åŒ ç›´æ¥å†™çš„å°±æ˜¯å®šä¹‰çš„æ—¶å€™å°±ç¡®å®šäº†ï¼ˆæ ¹æ®ä½œç”¨åŸŸï¼‰
      x=a+b;
      // console.log("y");
      // console.log(x);
    },
    z: function() {
      // console.log("z");
      // console.log(x);
      return x;
    }
  }
};

a=z();
a.y(x,y);
console.log(a.z(),a.x,x);

// 3 2 1
```

æ³¨æ„ï¼ša æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œå…¶ä¸­çš„**xå¼•ç”¨çš„æ˜¯é—­åŒ…å˜é‡**ï¼ˆå…ˆæ‰¾å‡½æ•°ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¸æ˜¯å…¨å±€çš„ï¼‰ï¼Œå¼€å§‹çš„æ—¶å€™ä¸º2.
a.y()æ”¹å˜çš„ä¹Ÿæ˜¯é—­åŒ…ä¸­çš„å˜é‡

#### 2
```js
var a = 1;
function fn1() {
    function fn3() {
        var fn2 = function () {
            console.log(a);
        }
        fn2();
        a = 4;
    }
    var a = 2;
    return fn3;
}
var fn = fn1();
fn();   //2
```
```js
var a = 1;
function fn1() {
     function fn3() {
           var a = 4;
           fn2();
     }
     var a = 2;
     return fn3;
}
function fn2() {
 console.log(a);
}
var fn = fn1();
fn();   //1
```

>ä½œè€…ï¼šæ°´æ¡¶ä¾å„’çŒªğŸ˜˜
é“¾æ¥ï¼šhttps://www.nowcoder.com/discuss/612971?channel=-1&source_id=profile_follow_post_nctrack

è€ƒå¯Ÿçš„æ˜¯å‡½æ•°ä½œç”¨åŸŸé—®é¢˜ è¿™äºŒä¸ªè¾“å‡ºä¸º1çš„ï¼Œå› ä¸ºfn2æ‰€åœ¨ä¸ºå…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥å³ä½¿åœ¨å†…éƒ¨è°ƒç”¨ï¼Œä¹Ÿæ˜¯è¾“å‡ºæ‰€åœ¨ä½œç”¨åŸŸçš„aï¼Œç¬¬ä¸€é“é¢˜ä¸­ï¼Œa=4æ²¡æœ‰ç”¨varæ¥å®šä¹‰ï¼Œåˆ™æ­¤æ—¶aè‡ªåŠ¨ææˆä¸ºå…¨å±€å˜é‡ï¼Œæ‰€ä»¥æ­¤æ—¶è¾“å‡ºçš„æ˜¯fn3ä¸­çš„a =2

#### 3
```js
var friendName = 'World';
(function() {
  if (typeof friendName === 'undefined') {
    var friendName = 'Jack';
    console.log('Goodbye ' + friendName);
  } else {
    console.log('Hello ' + friendName);
  }
})();
```

ç­‰äº
```js
var name = 'World!';
(function () {
    var name;
    if (typeof name === 'undefined') {
        name = 'Jack';
        console.log('Goodbye ' + name);
    } else {
        console.log('Hello ' + name);
    }
})();

// Goodbye Jack
```
>æ³¨æ„ï¼šå³ä½¿æ˜¯**ifè¯­å¥ä¸­çš„varä¹Ÿä¼šå˜é‡æå‡**
>**æ‰€ä»¥é‡åˆ°ifå…ˆçœ‹é‡Œé¢æœ‰æ²¡æœ‰å˜é‡å£°æ˜**

#### 4
```js
(function(){
   var x = y = 1;
})();
var z;

console.log(y); 
console.log(z); 
console.log(x); 
```

è¿™æ®µä»£ç çš„å…³é”®åœ¨äºï¼švar x = y = 1; å®é™…ä¸Šè¿™é‡Œæ˜¯ä»å³å¾€å·¦æ‰§è¡Œçš„ï¼Œé¦–å…ˆæ‰§è¡Œy = 1, å› ä¸ºyæ²¡æœ‰ä½¿ç”¨varå£°æ˜ï¼Œæ‰€ä»¥å®ƒæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œç„¶åç¬¬äºŒæ­¥æ˜¯å°†yèµ‹å€¼ç»™xï¼Œè®²ä¸€ä¸ªå…¨å±€å˜é‡èµ‹å€¼ç»™äº†ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œæœ€ç»ˆï¼Œxæ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œyæ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œæ‰€ä»¥æ‰“å°xæ˜¯æŠ¥é”™ã€‚

>æ³¨æ„ï¼š**å…¨å±€å¼•ç”¨å±€éƒ¨å˜é‡ä¼šæŠ¥é”™è€Œä¸æ˜¯è¾“å‡ºundefined**ã€‚

```js
// 1
// undefined
// Uncaught ReferenceError: x is not defined
```

#### 5
```js
 var a=3;
 function c(){
    alert(a);
 }
 (function(){
  var a=4;
  c();
 })();
 ```

 jsä¸­å˜é‡çš„ä½œç”¨åŸŸé“¾ä¸å®šä¹‰æ—¶çš„ç¯å¢ƒæœ‰å…³ï¼Œä¸æ‰§è¡Œæ—¶æ— å…³ã€‚æ‰§è¡Œç¯å¢ƒåªä¼šæ”¹å˜thisã€ä¼ é€’çš„å‚æ•°ã€å…¨å±€å˜é‡ç­‰

>cçš„ä½œç”¨åŸŸæ˜¯å…¨å±€ï¼Œä¸ç®¡æ˜¯è°è°ƒç”¨çš„ä»–ã€‚

```3```

#### 6  !!
```js
function fun(n, o) {
  console.log(o)
  return {
    fun: function(m){
      return fun(m, n);
    }
  };
}
var a = fun(0);  a.fun(1);  a.fun(2);  a.fun(3);
var b = fun(0).fun(1).fun(2).fun(3);
var c = fun(0).fun(1);  c.fun(2);  c.fun(3);
```

è¿™æ˜¯ä¸€é“å…³äº**é—­åŒ…**çš„é¢˜ç›®ï¼Œå¯¹äºfunæ–¹æ³•ï¼Œè°ƒç”¨ä¹‹åè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œå½“è°ƒç”¨å‡½æ•°çš„æ—¶å€™ä¼ å…¥çš„å®å‚æ¯”å‡½æ•°å£°æ˜æ—¶æŒ‡å®šçš„å½¢å‚ä¸ªæ•°è¦å°‘ï¼Œå‰©ä¸‹çš„å½¢å‚éƒ½å°†è®¾ç½®ä¸ºundefinedå€¼ã€‚æ‰€ä»¥ console.log(o); ä¼šè¾“å‡ºundefinedã€‚è€Œaå°±æ˜¯æ˜¯fun(0)è¿”å›çš„é‚£ä¸ªå¯¹è±¡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå‡½æ•°funä¸­å‚æ•° n çš„å€¼æ˜¯0ï¼Œè€Œè¿”å›çš„é‚£ä¸ªå¯¹è±¡ä¸­ï¼Œéœ€è¦ä¸€ä¸ªå‚æ•°nï¼Œè€Œè¿™ä¸ªå¯¹è±¡çš„ä½œç”¨åŸŸä¸­æ²¡æœ‰nï¼Œå®ƒå°±ç»§ç»­æ²¿ç€ä½œç”¨åŸŸå‘ä¸Šä¸€çº§çš„ä½œç”¨åŸŸä¸­å¯»æ‰¾nï¼Œæœ€ååœ¨å‡½æ•°funä¸­æ‰¾åˆ°äº†nï¼Œnçš„å€¼æ˜¯0ã€‚äº†è§£äº†è¿™ä¸€ç‚¹ï¼Œå…¶ä»–è¿ç®—å°±å¾ˆç®€å•äº†ï¼Œä»¥æ­¤ç±»æ¨ã€‚

```js
undefined  0  0  0
undefined  0  1  2
undefined  0  1  1
```

#### 7
```js
f = function() {return true;};   
g = function() {return false;};   
(function() {   
  // å®é™…ä¸Šä¼šæŠ¥é”™ï¼ŒåŠ ä¸Šä¸‹é¢è¿™è¡Œæ‰ä¸ä¼š
  //  function g() {return true;}  
   if (g() && [] == ![]) {   
      f = function f() {return false;};   
      function g() {return true;}   
   }   
})();   
console.log(f());
console.log(g());
```

è¿™é‡Œé¦–å…ˆå®šä¹‰äº†ä¸¤ä¸ªå˜é‡få’Œgï¼Œæˆ‘ä»¬çŸ¥é“å˜é‡æ˜¯å¯ä»¥é‡æ–°èµ‹å€¼çš„ã€‚åé¢æ˜¯ä¸€ä¸ªåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°ï¼Œåœ¨ if æ¡ä»¶ä¸­è°ƒç”¨äº†å‡½æ•° g()ï¼Œç”±äºåœ¨åŒ¿åå‡½æ•°ä¸­ï¼Œåˆé‡æ–°å®šä¹‰äº†å‡½æ•°gï¼Œå°±è¦†ç›–äº†å¤–éƒ¨å®šä¹‰çš„å˜é‡gï¼Œæ‰€ä»¥ï¼Œè¿™é‡Œè°ƒç”¨çš„æ˜¯å†…éƒ¨å‡½æ•° g æ–¹æ³•ï¼Œè¿”å›ä¸º trueã€‚ç¬¬ä¸€ä¸ªæ¡ä»¶é€šè¿‡ï¼Œè¿›å…¥ç¬¬äºŒä¸ªæ¡ä»¶ã€‚

ç¬¬äºŒä¸ªæ¡ä»¶æ˜¯[] == ![]ï¼Œå…ˆçœ‹ **![]** ï¼Œåœ¨ JavaScript ä¸­ï¼Œå½“ç”¨äºå¸ƒå°”è¿ç®—æ—¶ï¼Œæ¯”å¦‚åœ¨è¿™é‡Œï¼Œå¯¹è±¡çš„éç©ºå¼•ç”¨è¢«è§†ä¸º trueï¼Œç©ºå¼•ç”¨ null åˆ™è¢«è§†ä¸º falseã€‚ç”±äºè¿™é‡Œä¸æ˜¯ä¸€ä¸ª null, è€Œæ˜¯ä¸€ä¸ªæ²¡æœ‰å…ƒç´ çš„æ•°ç»„ï¼Œæ‰€ä»¥ **[] è¢«è§†ä¸º true**, è€Œ **![] çš„ç»“æœå°±æ˜¯ false äº†**ã€‚å½“ä¸€ä¸ªå¸ƒå°”å€¼å‚ä¸åˆ°æ¡ä»¶è¿ç®—çš„æ—¶å€™ï¼Œtrue ä¼šè¢«çœ‹ä½œ 1, è€Œ false ä¼šè¢«çœ‹ä½œ 0ã€‚ç°åœ¨æ¡ä»¶å˜æˆäº† [] == 0 çš„é—®é¢˜äº†ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å‚ä¸æ¡ä»¶æ¯”è¾ƒçš„æ—¶å€™ï¼Œå®ƒä¼šè¢«æ±‚å€¼ï¼Œæ±‚å€¼çš„ç»“æœæ˜¯æ•°ç»„æˆä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ[] çš„ç»“æœå°±æ˜¯ `''` ï¼Œè€Œ `''` ä¼šè¢«å½“ä½œ 0 ï¼Œæ‰€ä»¥ï¼Œæ¡ä»¶æˆç«‹ã€‚

ä¸¤ä¸ªæ¡ä»¶éƒ½æˆç«‹ï¼Œæ‰€ä»¥ä¼šæ‰§è¡Œæ¡ä»¶ä¸­çš„ä»£ç ï¼Œ f åœ¨å®šä¹‰æ˜¯æ²¡æœ‰ä½¿ç”¨varï¼Œæ‰€ä»¥ä»–æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ã€‚å› æ­¤ï¼Œè¿™é‡Œä¼šé€šè¿‡é—­åŒ…è®¿é—®åˆ°å¤–éƒ¨çš„å˜é‡ f, é‡æ–°èµ‹å€¼ï¼Œç°åœ¨æ‰§è¡Œ f å‡½æ•°è¿”å›å€¼å·²ç»æˆä¸º false äº†ã€‚è€Œ g åˆ™ä¸ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªå‡½æ•°å†…å®šä¹‰çš„ gï¼Œä¸ä¼šå½±å“åˆ°å¤–éƒ¨çš„ g å‡½æ•°ã€‚æ‰€ä»¥æœ€åçš„ç»“æœå°±æ˜¯ falseã€‚ï¼ˆï¼Ÿï¼ŸæŠ¥é”™ï¼‰

>æ³¨æ„ï¼š**å‡½æ•°å£°æ˜**ï¼ˆ`function g() {return true;} `ï¼‰ç­‰åŒäºvarå£°æ˜ï¼Œéƒ½æ˜¯**å£°æ˜å±€éƒ¨å˜é‡**ã€‚

---
å‚è€ƒ
```js
f = function() {return true;};   
var g = 4;
(function() {   
   console.log(g);
   if (g === undefined && [] == ![]) {   
      f = function f() {return false;};   
      var g = 3
   }   
})();   
console.log(f());

// undefined
// false
```

>è¯´æ˜å‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡å¯ä»¥æå‡

å’Œ
```js
(function() {   
   console.log(g);
   function g() {return true;}; 
})();   

// Æ’ g() {return true;}
```

>è¯´æ˜å‡½æ•°ä½œç”¨åŸŸä¸­å‡½æ•°ä¹Ÿå¯ä»¥æå‡

è€Œ
```js
f = function() {return true;};   
g = function() {return false;};   
(function() {   
  console.log(g);
  console.log(j);
   if ([] == ![]) {   
      f = function f() {return false;};   
      function g() {return true;}   
      var j = 3
   }   
})();   
console.log(f());
console.log(g());

// undefined
// undefined
// false
// false
```

>è¯´æ˜**ifè¯­å¥ä¸­çš„å‡½æ•°å£°æ˜**ä¹Ÿä¸ä¼šå˜ä¸ºå¼•ç”¨ï¼Œ**å’Œå˜é‡ä¸€æ ·èµ‹å€¼ä¸ºundefined**

>**if æ¡ä»¶å¥ä¸­çš„ function ä¼šè¢«ç¼–è¯‘æˆ å‡½æ•°è¡¨è¾¾å¼**, å£°æ˜ä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„æœ€é¡¶éƒ¨, ä½†æ˜¯èµ‹å€¼ä¼šè¢«ç•™åœ¨åŸåœ°. 

#### 8

è§ [ä½œç”¨åŸŸ](./ä½œç”¨åŸŸ.md#é»˜è®¤ç»‘å®š)

#### 9
```js
'use strict';
var b = 2;
if (true) {
  let a = 2;
  var b = 3;
  var c = 4;
  const d = 5;
}
console.log(a);
console.log(b); 
console.log(c);
console.log(d);
var d = 6;
```

æ³¨æ„ï¼Œå—çº§ä½œç”¨åŸŸæŒ‡çš„åªæ˜¯**è¯¥å˜é‡è‡ªå·±**ï¼Œä¸å½±å“å…¶ä»–å˜é‡ã€‚
è¿™é‡Œè™½ç„¶letåœ¨ifçš„å—çº§ä½œç”¨åŸŸé‡Œï¼Œä½†æ˜¯å…¶ä»–çš„varå£°æ˜çš„å˜é‡è¿˜æ˜¯ä¼šæå‡

```js
VM239:9 Uncaught ReferenceError: a is not defined //ä¸ç®¡æ˜¯å¦strictéƒ½æŠ¥é”™ï¼Œç„¶ååœæ­¢æ‰§è¡Œ
// å¦‚æœå¿½ç•¥açš„é”™è¯¯
3 4 undefined
```

#### 10

```js
var b = 'window';
function c() {
  console.log(b)
  console.log(this.b)
}

var obj = {
    b: '1-1',
    c:function(){
      console.log(b)
      console.log(this.b)
      return {
        b: '1-2',
        c: function() {
          console.log(b)
          console.log(this.b)
        }
      }
    },
}
c()
obj = obj.c()
obj.c = c
obj.c()
```

æ³¨æ„å®¡é¢˜

```
window
window
window
1-1
window
1-2
```

#### 11 !! 
```js
// let x = 5;
function setFn() {
  var x  =  0;
  return function() { 
    x = x + 1; 
    return x;
  };
}

const f1 = setFn();
const f2 = setFn();

f1(); // 1
f2(); // 1

f1(); // 2
f2(); // 2

const f3 = setFn();
const obj = {x: 10};

f3.call(obj); // 1
```

é—­åŒ…å‡½æ•°**æ¯æ¬¡è°ƒç”¨å½¢æˆä¸€ä¸ªè‡ªå·±çš„é—­åŒ…å˜é‡**ï¼Œå’Œåˆ«äººä¸ç›¸å¹²
è¿™é‡Œæ˜¯è€ƒå¯Ÿçš„ä½œç”¨åŸŸï¼Œcallæ”¹å˜çš„æ˜¯thisï¼Œå’Œthisæ— å…³

æ³¨æ„ä¸[è¿™ä¸ªé¢˜](./JSä»£ç .md####é™æ€å±æ€§)çš„åŒºåˆ«

#### 12 ï¼

```js
inner = 'window';

function say() {
    console.log(inner);
    console.log(this.inner);
}

var obj1 = (function() {
    var inner = '1-1';
    return {
        inner: '1-2',
        say: function() {
            console.log(inner);
            console.log(this.inner);
        }
    }
})();

var obj2 = (function() {
    var inner = '2-1';
    return {
        inner: '2-2',
        say: function() {
            console.log(inner);
            console.log(this.inner);
        }
    }
})();


say();
obj1.say();
obj2.say();
obj1.say = say;
obj1.say();
obj1.say = obj2.say;
obj1.say();
```

```
window
window
1-1
1-2
2-1
2-2
window
1-2
2-1
1-2
```

#### 13

```js
var a = 10;
(function () {
    console.log(a)
    a = 5
    console.log(window.a)
    var a = 20;
    console.log(a)
})()

var b = {
    a,
    c: b
}
console.log(b.c);
```

æ³¨æ„è¿™é‡Œ`c: b`**ä¸æ˜¯å¾ªç¯å¼•ç”¨**ï¼Œå› ä¸ºç»™cèµ‹å€¼çš„æ—¶å€™bå› ä¸ºvar**å˜é‡æå‡**ï¼ˆåˆå§‹åŒ–é˜¶æ®µï¼‰è¿˜æ˜¯undefinedã€‚

```js
undefined
10
20
undefined
```

#### 14

```js
var tmp = 123;
if(true){
    tmp = 'abc';
    let tmp;
    console.log(tmp);
}
```
æŠ¥é”™ï¼Œæ³¨æ„åªè¦åœ¨å¤§æ‹¬å·å†…éƒ½æ˜¯letçš„å—çº§ä½œç”¨åŸŸï¼Œæš‚æ—¶æ€§æ­»åŒºä¼šä¸€ç›´å¥æ•ˆï¼Œ**ä¸ç®¡å¤–å±‚ä½œç”¨åŸŸ**

#### 15

```js
var a=[];
for(var i=0;i<10;i++){
  a[i]=function(){
    console.log(i);
  };
}
a[6]();
```

10, å’Œç»å…¸å¾ªç¯ä¸€æ ·ã€‚
æ³¨æ„ï¼Œ**è¿™é‡Œæ²¡æœ‰å½¢æˆé—­åŒ…**ã€‚å› ä¸ºä¸æ˜¯å‡½æ•°è¿”å›å‡½æ•°çš„å½¢å¼ã€‚

1. ç”¨é—­åŒ…æ”¹æ­£ï¼š
```js
var a=[];
for(var i=0;i<10;i++){
    a[i]=function(num){
        return function(){
            return num;
        };
    }(i);
}
a[6]();

// 6
```

2. **setTimeoutå‚æ•°**
```js
for (var i = 0; i < 5; i++) {
  setTimeout((num) => {
    console.log(num);
  }, 1000, i);
}
```

#### 16 !
```js
var a = 10
function b(){
    a = 100
    return;
    function a(){}
}
b()
console.log(a)
```

function a(){}ç›¸å½“äº var a = function (){} ,**æ˜¯å±€éƒ¨å˜é‡**

#### 17 ï¼
```js
var a=1

function a() {
  console.log('c');
}

function a() {
  console.log('b');
}

a()

//æŠ¥é”™
```
functionä¼˜å…ˆæå‡ï¼Œä¸”åé¢çš„å£°æ˜ä¼šè¢«è·³è¿‡ã€‚ä½†æ˜¯æ‰§è¡Œé˜¶æ®µè¿˜æ˜¯ä¼šé‡æ–°èµ‹å€¼ã€‚

### this
#### 1 !!!!
```js
window.number = 2;
var obj = {
 number: 3,
 db1: (function(){
   console.log(this);
   this.number *= 4;
   return function(){
     console.log(this);
     this.number *= 5;
   }
 })()
}
var db1 = obj.db1;
db1();
obj.db1();
console.log(obj.number);     
console.log(window.number); 
```

è¿™é“é¢˜ç›®çœ‹æ¸…èµ·æ¥æœ‰ç‚¹ä¹±ï¼Œä½†æ˜¯å®é™…ä¸Šæ˜¯è€ƒå¯ŸthisæŒ‡å‘çš„:
1. æ‰§è¡Œdb1()æ—¶ï¼ŒthisæŒ‡å‘å…¨å±€ä½œç”¨åŸŸï¼Œæ‰€ä»¥window.number * 4 = 8ï¼Œç„¶åæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œ æ‰€ä»¥window.number * 5 = 40ï¼›
>æ³¨æ„ï¼Œåœ¨å®šä¹‰`var obj`çš„æ—¶å€™db1çš„ç«‹å³æ‰§è¡Œå‡½æ•°å·²ç»è¢«æ‰§è¡Œäº†ï¼Œè€Œä¸æ˜¯ä¸‹é¢æ‰§è¡Œdb1();çš„æ—¶å€™æ‰æ‰§è¡Œã€‚
2. æ‰§è¡Œobj.db1();æ—¶ï¼ŒthisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰§è¡ŒåŒ¿åå‡½æ•°ï¼Œæ‰€ä»¥obj.numer * 5 = 15ã€‚

>**æ³¨æ„ç«‹å³æ‰§è¡Œå‡½æ•°è¿”å›æ˜¯ä¸€ä¸ªå€¼**ï¼Œè¿™é‡Œ`obj.db1();`å®é™…ä¸Š()æ‰§è¡Œçš„æ˜¯è¿”å›çš„é‚£ä¸ªfunction()ï¼Œè€Œobj.db1æœ¬èº«ä»£è¡¨
```js
   return function(){
     console.log(this);
     this.number *= 5;
   }
```
>è¿™ä¸ªå‡½æ•°è€Œä¸æ˜¯å¤–é¢é‚£ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ã€‚

>**ç«‹å³æ‰§è¡Œå‡½æ•°åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚!!!!!** ä¹‹åå°±é”€æ¯ï¼Œåªå‰©ä¸‹è¿”å›çš„å€¼ã€‚
```js
// Window
// Window
// obj
// 15
// 40
```

#### 2

```js
var a = 1;
function printA(){
  console.log(this.a);
}
var obj={
  a:2,
  foo:printA,
  bar:function(){
    printA();
  }
}

obj.foo();
obj.bar(); 
var foo = obj.foo;
foo(); 
```

è§£æï¼š
1. obj.foo()ï¼Œfoo çš„thisæŒ‡å‘objå¯¹è±¡ï¼Œæ‰€ä»¥aä¼šè¾“å‡º2ï¼›
   >æ³¨æ„è¿™é‡Œçš„`. å’Œ ()`æ˜¯å†™åœ¨objåé¢çš„ï¼Œä¹Ÿå°±æ˜¯objè°ƒç”¨çš„ï¼Œæ‰€ä»¥thisæŒ‡å‘obj
2. obj.bar()ï¼ŒprintAåœ¨baræ–¹æ³•ä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æ­¤æ—¶printAçš„thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›
3. foo()ï¼Œfooæ˜¯åœ¨å…¨å±€å¯¹è±¡ä¸­æ‰§è¡Œçš„ï¼Œæ‰€ä»¥å…¶thisæŒ‡å‘çš„æ˜¯windowï¼Œæ‰€ä»¥ä¼šè¾“å‡º1ï¼›

```js
// 2 1 1
```

#### 3
```js
var name = 'window'; 

var A = {
   name: 'A',
   sayHello: () => {
      console.log(this.name)
   }
}

A.sayHello(); //window
```

ä½œç”¨åŸŸæ˜¯æŒ‡å‡½æ•°å†…éƒ¨ï¼Œè¿™é‡Œçš„ç®­å¤´å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯sayHelloï¼Œ**æ‰€åœ¨çš„ä½œç”¨åŸŸå…¶å®æ˜¯æœ€å¤–å±‚çš„jsä¸Šä¸‹æ–‡**ï¼Œå› ä¸º**æ²¡æœ‰å…¶ä»–å‡½æ•°åŒ…è£¹**ï¼›ç„¶åæœ€å¤–å±‚çš„jsç¯å¢ƒæŒ‡å‘çš„å¯¹è±¡æ˜¯winodwå¯¹è±¡ï¼Œæ‰€ä»¥è¿™é‡Œçš„thisæŒ‡å‘çš„æ˜¯windowå¯¹è±¡ã€‚

>ç®­å¤´å‡½æ•°ä½“å†…çš„thiså¯¹è±¡ï¼Œå°±æ˜¯å®šä¹‰è¯¥å‡½æ•°æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸæŒ‡å‘çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨æ—¶æ‰€åœ¨çš„ä½œç”¨åŸŸæŒ‡å‘çš„å¯¹è±¡ã€‚
>å°±æ˜¯è¯´ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œ**ç»§æ‰¿ä»–çˆ¶çº§ä½œç”¨åŸŸçš„this**

>åˆ«å¿˜äº†ï¼šå¯¹è±¡çš„å¤§æ‹¬å·ä¸æ„æˆä½œç”¨åŸŸï¼Œä¸€èˆ¬åªæœ‰å‡½æ•°æ‰æ„æˆä½œç”¨åŸŸã€‚


é‚£å¦‚ä½•æ”¹é€ æˆæ°¸è¿œç»‘å®šAå‘¢ï¼š
```js
var name = 'window'; 

var A = {
   name: 'A',
   sayHello: function(){
      var s = () => console.log(this.name)
      return s//è¿”å›ç®­å¤´å‡½æ•°s
   }
}

var sayHello = A.sayHello();
sayHello();// è¾“å‡ºA 

var B = {
   name: 'B';
}

sayHello.call(B); //è¿˜æ˜¯A
sayHello.call(); //è¿˜æ˜¯A
```

#### 4

```js
var obj = {
   say: function() {
     var f1 = () =>  {
       console.log("1111", this);
     }
     f1();
   },
   pro: {
     getPro:() =>  {
        console.log(this);
     }
   }
}
var o = obj.say;
o();
obj.say();
obj.pro.getPro();
```

æ³¨æ„ç®­å¤´å‡½æ•°ç»§æ‰¿å¤–é¢å‡½æ•°çš„thisï¼Œæ‰€ä»¥**å…ˆåˆ¤æ–­å¤–é¢å‡½æ•°çš„this**

```
1111 windowå¯¹è±¡
1111 objå¯¹è±¡
windowå¯¹è±¡
```

#### 5

```js
var length = 10;
function fn() {
    console.log(this.length);
}
 
var obj = {
  length: 5,
  method: function(fn) {
    fn();
    arguments[0]();
  }
};
 
obj.method(fn, 1);

// 10 2
```

- ç¬¬ä¸€æ¬¡æ‰§è¡Œfn()ï¼ŒthisæŒ‡å‘windowå¯¹è±¡ï¼Œè¾“å‡º10ã€‚
- ç¬¬äºŒæ¬¡æ‰§è¡Œ`arguments[0]()`ï¼Œ**ç›¸å½“äºargumentsè°ƒç”¨æ–¹æ³•**ï¼ŒthisæŒ‡å‘argumentsï¼Œè€Œè¿™é‡Œä¼ äº†ä¸¤ä¸ªå‚æ•°ï¼Œæ•…è¾“å‡ºargumentsé•¿åº¦ä¸º2ã€‚

#### 6

```js
 var a = 10; 
 var obt = { 
   a: 20, 
   fn: function(){ 
     var a = 30; 
     console.log(this.a)
   } 
 }
 obt.fn();  // 20
 obt.fn.call(); // 10
 (obt.fn)(); // 20
```

(obt.fn)()ï¼Œ è¿™é‡Œç»™è¡¨è¾¾å¼åŠ äº†æ‹¬å·ï¼Œè€Œ**æ‹¬å·çš„ä½œç”¨æ˜¯æ”¹å˜è¡¨è¾¾å¼çš„è¿ç®—é¡ºåº**ï¼Œè€Œåœ¨è¿™é‡ŒåŠ ä¸ä¸åŠ æ‹¬å·å¹¶æ— å½±å“ï¼›ç›¸å½“äº  obt.fn()ï¼Œæ‰€ä»¥ä¼šæ‰“å°å‡º 20ï¼›

#### 7

```js
<button id="btn">ç‚¹å‡»æˆ‘</button>

// äº‹ä»¶ç»‘å®š

function handleClick(e) {
    console.log(this); // <button id="btn">ç‚¹å‡»æˆ‘</button>
}
document.getElementById('btn').addEventListener('click',handleClick,false);  //   <button id="btn">ç‚¹å‡»æˆ‘</button>
        
document.getElementById('btn').onclick= handleClick; //  <button id="btn">ç‚¹å‡»æˆ‘</button>
```
å½“é€šè¿‡äº‹ä»¶ç»‘å®šæ¥ç»™DOMå…ƒç´ æ·»åŠ äº‹ä»¶ï¼Œäº‹ä»¶å°†è¢«ç»‘å®šä¸ºå½“å‰DOMå¯¹è±¡ã€‚

---
```js
<button onclick="handleClick()" id="btn1">ç‚¹å‡»æˆ‘</button>
<button onclick="console.log(this)" id="btn2">ç‚¹å‡»æˆ‘</button>

function handleClick(e) {
    console.log(this); // window
}

//ç¬¬äºŒä¸ª button æ‰“å°çš„æ˜¯   <button id="btn">ç‚¹å‡»æˆ‘</button>
```
æˆ‘è®¤ä¸º**å†…è”äº‹ä»¶**å¯ä»¥è¿™æ ·ç†è§£ï¼š
```js
//ä¼ªä»£ç 

<button onclick=function(){  handleClick() } id="btn1">ç‚¹å‡»æˆ‘</button>
<button onclick=function() { console.log(this) } id="btn2">ç‚¹å‡»æˆ‘</button>
```
è¿™æ ·æˆ‘ä»¬å°±èƒ½ç†è§£ä¸Šè¿°ä»£ç ä¸­ä¸ºä»€ä¹ˆå†…è”äº‹ä»¶ä¸€ä¸ªæŒ‡å‘windowï¼Œä¸€ä¸ªæŒ‡å‘å½“å‰DOMå…ƒç´ ã€‚ï¼ˆå½“ç„¶æµè§ˆå™¨å¤„ç†å†…è”äº‹ä»¶æ—¶å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼‰

### å¼‚æ­¥

Node ä¸­çš„ process.nextTick ä¼šå…ˆäºå…¶ä»– microtask æ‰§è¡Œ

```js

Promise.resolve().then(function() {
  console.log("promise1");
}); 
process.nextTick(() => {
  console.log("nextTick");
});

// nextTick, promise1
```

#### 1 !!
```js
const p1=new Promise((resolve, reject)=>{
  setTimeout(() => {
    resolve(1)
    throw new Error(2)
  }, 2000);
})
const p2 = p1.then(val=>{
  console.log(val);
  return val + 1
}).catch(err=>{
  console.log(err);
  return err
})
Promise.all([p2, Promise.reject(3).then(val2=>{
  console.log(val2);
})]).catch(err2=>{
  console.log(err2);
})

---
// 3
// Uncaught Error: 2
// 1
```

promise rejectäº†å°±ä¸å¤„ç†å…¶ä»–çš„
>throw new Error(2)ä¹Ÿä¼šè®©promiseå˜reject

promiseå›è°ƒäº†ï¼Œä½†æ˜¯å…¶ä»–promiseå·²ç»å‘é€äº†å°±è¿˜æ˜¯ä¼šæ‰§è¡Œ

#### 2 !!!!
```js
const timer1 = setTimeout(() => {
  console.log('timer1')
  Promise.resolve().then(() => {
    console.log('promise1')
  })
}, 0)
const timer2 = setTimeout(() => {
  console.log('timer2')
  Promise.resolve().then(() => {
    console.log('promise2')
  })
}, 0)

// timer1
// promise1
// timer2
// promise2
```
```js
Promise.resolve().then(() => {
  console.log('promise1');
  const timer2 = setTimeout(() => {
    console.log('timer2')
  }, 0)
});
const timer1 = setTimeout(() => {
  console.log('timer1')
  Promise.resolve().then(() => {
    console.log('promise2')
  })
}, 0)
console.log('start');


// start
// promise1
// timer1
// promise2
// timer2
```
æ¯ä¸ªsetTimeout**å•ç‹¬æ„æˆä¸€æ¬¡å®ä»»åŠ¡é˜Ÿåˆ—**ï¼Œè€Œä¸æ˜¯éƒ½åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸€èµ·å¤„ç†
**æ¯ä¸ªsettimeoutä¹‹åæ‰§è¡Œè‡ªå·±çš„å¾®ä»»åŠ¡**

>é™¤äº†ç¬¬ä¸€æ¬¡ä¸»ä»»åŠ¡ä¹‹å¤–ï¼Œä¹‹åæ¯è½®äº‹ä»¶å¾ªç¯éƒ½åªå–å‡º**ä¸€ä¸ªå®ä»»åŠ¡**æ‰§è¡Œï¼Œç„¶åæ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡


#### 3
```js
setTimeout(() => {
  console.log(1);
}, 0);

new Promise(res => {
  res(console.log(3));
  console.log(4);
}).then(() => {
  console.log(5);
});

(async () => console.log(6))()
```

**resolveçš„å‚æ•°å¦‚æœæ˜¯å‡½æ•°ï¼Œä¼šç›´æ¥åŒæ­¥æ‰§è¡Œ**
**Priomiseæ„é€ å‡½æ•°å†…éƒ¨éƒ½æ˜¯åŒæ­¥çš„ï¼ï¼**

å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªåŸå§‹å€¼ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªä¸å…·æœ‰then()æ–¹æ³•çš„å¯¹è±¡ï¼Œåˆ™Promise.resolve()æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡ï¼ŒçŠ¶æ€ä¸ºresolvedã€‚
(å³resolveä¸­çš„å‚æ•°ç›¸å½“äºnew Promiseçš„ä»£ç ï¼Œæ˜¯åŒæ­¥çš„)
```js
Promise.resolve('foo')
// ç­‰ä»·äº
new Promise(resolve => resolve('foo'))
```
ä¸Šé¢ä»£ç ç”Ÿæˆä¸€ä¸ªæ–°çš„ Promise å¯¹è±¡çš„å®ä¾‹pã€‚ç”±äºå­—ç¬¦ä¸²Helloä¸å±äºå¼‚æ­¥æ“ä½œï¼ˆåˆ¤æ–­æ–¹æ³•æ˜¯å­—ç¬¦ä¸²å¯¹è±¡ä¸å…·æœ‰ then æ–¹æ³•ï¼‰ï¼Œè¿”å› Promise å®ä¾‹çš„çŠ¶æ€ä»ä¸€ç”Ÿæˆå°±æ˜¯resolvedï¼Œæ‰€ä»¥å›è°ƒå‡½æ•°ä¼šç«‹å³æ‰§è¡Œã€‚Promise.resolve()æ–¹æ³•çš„å‚æ•°ï¼Œä¼šåŒæ—¶ä¼ ç»™å›è°ƒå‡½æ•°ã€‚


```js
3 4 6 5 1
```

#### 4 !
```js
const promiseA = Promise.resolve('a')
promiseA.then((res) => {
console.log(res)
}).then((res) => {
console.log(res)
})
const promiseB = Promise.resolve('b')
promiseB.then((res) => {
console.log(res)
})
promiseB.then((res) => {
console.log(res)
})

// a b b undefined
```

thençš„å¾®ä»»åŠ¡ä¹Ÿæ˜¯æŒ‰åŠ å…¥ä»»åŠ¡é˜Ÿåˆ—çš„é¡ºåºæ‰§è¡Œï¼Œé“¾å¼å³è°ƒç”¨åé¢çš„thenä¹Ÿä¸ä¼šæ’é˜Ÿå…ˆæ‰§è¡Œã€‚

#### 5 ï¼ï¼
```js
Promise.reject(7).then(
    ()=>console.log(1),
    undefined
).then(
    ()=>console.log(2),
    (err)=>console.log(err,3)
)
```

catchä¸æ˜¯å‡½æ•°ï¼Œ**å‘ç”Ÿç©¿é€**
`7 3`

#### 6

```js
Promise.resolve().then(() => {
  return new Error('error!!!')
}).then(res => {
  console.log("then: ", res)
}).catch(err => {
  console.log("catch: ", err)
})

// "then: " "Error: error!!!"
```

è¿”å›ä»»æ„ä¸€ä¸ªé promise çš„å€¼éƒ½ä¼šè¢«åŒ…è£¹æˆ promise å¯¹è±¡ï¼Œå› æ­¤è¿™é‡Œçš„return new Error('error!!!')ä¹Ÿè¢«**åŒ…è£¹æˆäº†return Promise.resolve(new Error('error!!!'))**ï¼Œå› æ­¤å®ƒä¼šè¢«thenæ•è·è€Œä¸æ˜¯catchã€‚

æ³¨æ„ï¼š**throw new Error()æ‰ä¼šå˜æˆrejectï¼Œ returnä¸ä¼š**ã€‚åˆ«å¼„æ··äº†ã€‚

#### 7

```js
const promise = Promise.resolve().then(() => {
  return promise;
})
promise.catch(console.err)

// Uncaught (in promise) TypeError: Chaining cycle detected for promise #<Promise>
```

è¿™é‡Œå…¶å®æ˜¯ä¸€ä¸ªå‘ï¼Œ.then æˆ– .catch **è¿”å›çš„å€¼ä¸èƒ½æ˜¯ promise æœ¬èº«**ï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯ã€‚

#### 8 ï¼

```js
async function async1() {
  console.log("async1 start");
  await async2();
  console.log("async1 end");
  setTimeout(() => {
    console.log('timer1')
  }, 0)
}
async function async2() {
  setTimeout(() => {
    console.log('timer2')
  }, 0)
  console.log("async2");
}
async1();
setTimeout(() => {
  console.log('timer3')
}, 0)
console.log("start")
```

async å‡½æ•°ä¸­åªè¦æ²¡æœ‰awaitå°±ä¼š**ç«‹å³è¿”å›**ä¸€ä¸ªfulfilledçš„promiseï¼Œä¸ç®¡æœ‰æ²¡æœ‰settimeoutã€‚

```
async1 start
async2
start
async1 end
timer2
timer3
timer1
```

#### 9 !!ï¼

```js
async function async1 () {
  console.log('async1 start');
  await new Promise(resolve => {
    console.log('promise1')
  })
  console.log('async1 success');
  return 'async1 end'
}
console.log('srcipt start')
async1().then(res => console.log(res))
console.log('srcipt end')
```

å‘ï¼šè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯åœ¨async1ä¸­awaitåé¢çš„Promiseæ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼ˆæ²¡resolveï¼‰ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„çŠ¶æ€**å§‹ç»ˆæ˜¯pendingçŠ¶æ€**ï¼Œæ‰€ä»¥åœ¨awaitä¹‹åçš„å†…å®¹æ˜¯ä¸ä¼šæ‰§è¡Œçš„ï¼ŒåŒ…æ‹¬async1åé¢çš„ .thenã€‚

```
script start
async1 start
promise1
script end
```

#### 10 ï¼

```js
async function async1 () {
  await async2();
  console.log('async1');
  return 'async1 success'
}
async function async2 () {
  return new Promise((resolve, reject) => {
    console.log('async2')
    reject('error')
  })
}
async1().then(res => console.log(res))

// å¦‚æœasyncå‡½æ•°ä¸­æŠ›å‡ºäº†é”™è¯¯ï¼Œå°±ä¼šç»ˆæ­¢é”™è¯¯ç»“æœï¼Œä¸ä¼šç»§ç»­å‘ä¸‹æ‰§è¡Œã€‚
// async2
// Uncaught (in promise) error
```

awaitç­‰åˆ°çš„promiseå¦‚æœæ˜¯rejectedçš„æˆ–è€…ä¸€ç›´pendingï¼Œåˆ™åé¢çš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼›

e.g.
```js
function getSomething() {
    return new Error();
}

async function testAsync() {
    return Promise.reject("hello async");
}

async function test() {
    const v1 = await getSomething();
    console.log(0);
    const v2 = await testAsync();
    console.log(123);
    console.log(v1, v2);
}

test();

// 0
``` 

?åŠ ä¸Štry catchåé¢å¯ä»¥æ‰§è¡Œã€‚ä½†å¦‚æœæ˜¯pendingè¿˜æ˜¯ä¸èƒ½æ‰§è¡Œ v2æ˜¯undefined

```js
try {
    v2 = await testAsync();
  } catch(err) {
    console.log(err);
  }
``` 

### åŸå‹

#### 1

```js
function Person(name) {
    this.name = name
}
var p2 = new Person('king');
console.log(p2.__proto__) //Person.prototype
console.log(p2.__proto__.__proto__) //Object.prototype
console.log(p2.__proto__.__proto__.__proto__) // null
console.log(p2.__proto__.__proto__.__proto__.__proto__)//nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™
console.log(p2.__proto__.__proto__.__proto__.__proto__.__proto__)//nullåé¢æ²¡æœ‰äº†ï¼ŒæŠ¥é”™
console.log(p2.constructor)//Person. æ˜¯p2.__proto__.constructor
console.log(p2.prototype)//undefined p2æ˜¯å®ä¾‹ï¼Œæ²¡æœ‰prototypeå±æ€§
console.log(Person.constructor)//Functionã€‚ æ˜¯Person.__proto__.constructor
console.log(Person.prototype)//æ‰“å°å‡ºPerson.prototypeè¿™ä¸ªå¯¹è±¡é‡Œæ‰€æœ‰çš„æ–¹æ³•å’Œå±æ€§ï¼ˆå®ƒé‡Œé¢é™¤äº†`__proto__`åªæœ‰`constructor: Æ’ Person(name)`ï¼‰
console.log(Person.prototype.constructor)//Person
console.log(Person.prototype.__proto__)// Object.prototype
console.log(Person.__proto__) //Function.prototype
console.log(Function.prototype.__proto__)//Object.prototype
console.log(Function.__proto__)//Function.prototype
console.log(Object.__proto__)//Function.prototype
console.log(Object.prototype.__proto__)//null
```

>**æ‰€æœ‰çš„å‡½æ•°**ï¼ˆåŒ…æ‹¬Functionå’ŒObjectï¼‰çš„`__proto__`éƒ½æ˜¯Function.prototype

#### 2

```js {.line-numbers}
function Parent() {
    this.a = 1;
    this.b = [1, 2, this.a];
    this.c = { demo: 5 };
    this.show = function () {
        console.log(this.a , this.b , this.c.demo );
    }
}

function Child() {
    this.a = 2;
    this.change = function () {
        this.b.push(this.a);
        this.a = this.b.length;
        this.c.demo = this.a++;
    }
}

Child.prototype = new Parent();
var parent = new Parent();
var child1 = new Child();
var child2 = new Child();
child1.a = 11;
child2.a = 12;
parent.show();
child1.show();
child2.show();
child1.change();
child2.change();
parent.show();
child1.show();
child2.show();
```

æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹å¾ˆå¤šï¼Œä¾‹å¦‚thisçš„æŒ‡å‘ã€åŸå‹ã€åŸå‹é“¾ã€ç±»çš„ç»§æ‰¿ã€æ•°æ®ç±»å‹ç­‰ã€‚

è§£æï¼š
1. parent.show()ï¼Œå¯ä»¥ç›´æ¥è·å¾—æ‰€éœ€çš„å€¼ï¼Œæ²¡å•¥å¥½è¯´çš„ï¼›
   
2. child1.show()ï¼ŒChildçš„æ„é€ å‡½æ•°åŸæœ¬æ˜¯æŒ‡å‘Childçš„ï¼Œé¢˜ç›®æ˜¾å¼å°†Childç±»çš„åŸå‹å¯¹è±¡æŒ‡å‘äº†Parentç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œéœ€è¦æ³¨æ„Child.prototypeæŒ‡å‘çš„æ˜¯Parentçš„å®ä¾‹parentï¼Œè€Œä¸æ˜¯æŒ‡å‘Parentè¿™ä¸ªç±»ã€‚
   
3. child2.show()ï¼Œè¿™ä¸ªä¹Ÿæ²¡å•¥å¥½è¯´çš„ï¼›
   
4. parent.show()ï¼Œparentæ˜¯ä¸€ä¸ªParentç±»çš„å®ä¾‹ï¼ŒChild.prorotypeæŒ‡å‘çš„æ˜¯Parentç±»çš„å¦ä¸€ä¸ªå®ä¾‹ï¼Œä¸¤è€…åœ¨å †å†…å­˜ä¸­äº’ä¸å½±å“ï¼Œæ‰€ä»¥ä¸Šè¿°æ“ä½œä¸å½±å“parentå®ä¾‹ï¼Œæ‰€ä»¥è¾“å‡ºç»“æœä¸å˜ï¼›
   
5. child1.show()ï¼Œchild1æ‰§è¡Œäº†change()æ–¹æ³•åï¼Œå‘ç”Ÿäº†æ€æ ·çš„å˜åŒ–å‘¢?
   
- this.b.push(this.a)ï¼Œç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œ**this.bä¼šæŒ‡å‘Child.prototypeä¸Šçš„bæ•°ç»„**,this.aä¼šæŒ‡å‘child1çš„aå±æ€§,æ‰€ä»¥Child.prototype.bå˜æˆäº†`[1,2,1,11]`;
  
- this.a = this.b.lengthï¼Œè¿™æ¡è¯­å¥ä¸­this.aå’Œthis.bçš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸ºchild1.aå˜ä¸º4;
  
- this.c.demo = this.a++ï¼Œç”±äºchild1è‡ªèº«å±æ€§å¹¶æ²¡æœ‰cè¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„this.cä¼šæŒ‡å‘Child.prototype.cï¼Œthis.aå€¼ä¸º4ï¼Œä¸ºåŸå§‹ç±»å‹ï¼Œæ•…èµ‹å€¼æ“ä½œæ—¶ä¼šç›´æ¥èµ‹å€¼ï¼ŒChild.prototype.c.demoçš„ç»“æœä¸º4ï¼Œè€Œthis.aéšåè‡ªå¢ä¸º5(4 + 1 = 5)ã€‚
  
6. child2æ‰§è¡Œäº†change()æ–¹æ³•, è€Œchild2å’Œchild1å‡æ˜¯Childç±»çš„å®ä¾‹ï¼Œæ‰€ä»¥ä»–ä»¬çš„åŸå‹é“¾æŒ‡å‘åŒä¸€ä¸ªåŸå‹å¯¹è±¡Child.prototype,ä¹Ÿå°±æ˜¯åŒä¸€ä¸ªparentå®ä¾‹ï¼Œæ‰€ä»¥child2.change()ä¸­æ‰€æœ‰å½±å“åˆ°åŸå‹å¯¹è±¡çš„è¯­å¥éƒ½ä¼šå½±å“child1çš„æœ€ç»ˆè¾“å‡ºç»“æœã€‚
   
- this.b.push(this.a)ï¼Œç”±äºthisçš„åŠ¨æ€æŒ‡å‘ç‰¹æ€§ï¼Œthis.bä¼šæŒ‡å‘Child.prototypeä¸Šçš„bæ•°ç»„,this.aä¼šæŒ‡å‘child2çš„aå±æ€§,æ‰€ä»¥Child.prototype.bå˜æˆäº†`[1,2,1,11,12]`;
  
- this.a = this.b.lengthï¼Œè¿™æ¡è¯­å¥ä¸­this.aå’Œthis.bçš„æŒ‡å‘ä¸ä¸Šä¸€å¥ä¸€è‡´ï¼Œæ•…ç»“æœä¸ºchild2.aå˜ä¸º5;
  
- this.c.demo = this.a++ï¼Œç”±äºchild2è‡ªèº«å±æ€§å¹¶æ²¡æœ‰cè¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ­¤å¤„çš„this.cä¼šæŒ‡å‘Child.prototype.cï¼Œæ•…æ‰§è¡Œç»“æœä¸ºChild.prototype.c.demoçš„å€¼å˜ä¸ºchild2.açš„å€¼5ï¼Œè€Œchild2.aæœ€ç»ˆè‡ªå¢ä¸º6(5 + 1 = 6)ã€‚

>ä¸»è¦åœ¨äº28è¡Œè°ƒç”¨çš„ï¼Œç¬¬13è¡Œçš„è¿™ä¸ªthis.bï¼Œå®é™…ä¸Šè¿™é‡Œçš„thisè¿˜æ˜¯æŒ‡å‘è¿™ä¸ªchild1ï¼Œä»–åªæœ‰ä¸€ä¸ªaå±æ€§ã€‚ä½†æ˜¯thisä»£è¡¨äº†è¿™ä¸ªchild1ï¼Œ**æ‰¾`.b`çš„å±æ€§çš„æ—¶å€™è¿˜æ˜¯ä¼šé¡ºç€åŸå‹é“¾æ‰¾**ï¼Œæ‰€ä»¥æ‰æ‰¾åˆ°äº†é‚£ä¸ªParentå®ä¾‹çš„å±æ€§ã€‚

```js
parent.show(); // 1  [1,2,1] 5

child1.show(); // 11 [1,2,1] 5
child2.show(); // 12 [1,2,1] 5

parent.show(); // 1 [1,2,1] 5

child1.show(); // 5 [1,2,1,11,12] 5

child2.show(); // 6 [1,2,1,11,12] 5
```

#### 3
```js
Function.prototype.a = () => alert(1);

Object.prototype.b = () => alert(2);

function A() {};

var a = new A();

a.a();

a.b();

a instanceof A   
a instanceof Function
a instanceof Object
```

### æ•°ç»„

#### 1

```js
let arr=[1,2,3]
let brr=arr.push(4)
let crr=arr.splice(1,1,)
console.log(arr)
console.log(brr)
console.log(crr)

---
[1, 3, 4]
4  
[2]
```

spliceçš„è¿”å›å€¼
ç”±è¢«åˆ é™¤çš„å…ƒç´ ç»„æˆçš„ä¸€ä¸ª**æ•°ç»„**ã€‚å¦‚æœåªåˆ é™¤äº†ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›åªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰åˆ é™¤å…ƒç´ ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚

push è¿”å›çš„æ˜¯æ•°ç»„é•¿åº¦ï¼Œpopè¿”å›çš„æ˜¯å¼¹å‡ºçš„å…ƒç´ 

#### 2 !!

```js
const objA = { a: 1 };
const objB = { b: 2 };
const arrA = [objA];
const arrB = [objB];

const v1 = arrA.concat(arrB);
const v2 = arrA.concat(...arrB);
const v3 = arrA.push(arrB); //[{ a: 1 }, [{ b: 2 }]]
const v4 = arrA.push(...arrB); //[{ a: 1 }, [{ b: 2 }], { b: 2 }]
console.log(v1);
console.log(v2);
console.log(v3);
console.log(v4);
```

**pushè¿”å›çš„æ˜¯æ•°ç»„é•¿åº¦!**

concatæ¥å—æ•°ç»„æˆ–ä¸€ç»„å€¼ï¼Œå¦‚æœæ˜¯**æ•°ç»„åˆ™å°†æ•°ç»„æ‹†å¼€**ï¼Œä¸€ç»„å€¼åˆ™ç›´æ¥concatï¼Œ**æ˜¯æµ…æ‹·è´**ï¼ˆç±»ä¼¼äº...ï¼‰ã€‚

```js
[{ a: 1 }, { b: 2 }]
[{ a: 1 }, { b: 2 }]
2
3
```

### å…¶ä»–

#### 1
```html {.line-numbers}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .active{
            color: blue;
        }

        .line{
            font-size: 100px;
        }

    </style>
</head>
<body>
  
    <div id="example" >
        {{message}}
    </div>

    <script src="../js/vue.js"></script>
    <script>
        const vm = new Vue({
            el: '#example', //ç”¨äºæŒ‚åœ¨è¦ç®¡ç†çš„å…ƒç´ 
            data() {
                return {
                  message: '123'
                }
            }
        })

    vm.message = 'hello world';
    console.log(vm.$el);
    console.log(vm.$el.innerText);
    console.log(vm.$el.innerText === 'hello world');
    </script>
</body>
</html> 
```

åœ¨å¼‚æ­¥æ›´æ–°æ‰§è¡Œä¹‹å‰æ“ä½œ DOM æ•°æ®ä¸ä¼šå˜åŒ–
**åŒæ­¥æ“ä½œæ‹¿ä¸åˆ°æœ€æ–°çš„DOM**ï¼Œè¦ç”¨nextTick

åŸå› ï¼šVue åœ¨æ›´æ–° DOM æ—¶æ˜¯**å¼‚æ­¥**æ‰§è¡Œçš„ã€‚åªè¦ä¾¦å¬åˆ°æ•°æ®å˜åŒ–ï¼ŒVue å°†å¼€å¯ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶ç¼“å†²åœ¨åŒä¸€äº‹ä»¶å¾ªç¯ä¸­å‘ç”Ÿçš„æ‰€æœ‰æ•°æ®å˜æ›´ã€‚å¦‚æœåŒä¸€ä¸ª watcher è¢«å¤šæ¬¡è§¦å‘ï¼Œåªä¼šè¢«æ¨å…¥åˆ°é˜Ÿåˆ—ä¸­ä¸€æ¬¡ã€‚è¿™ç§åœ¨ç¼“å†²æ—¶å»é™¤é‡å¤æ•°æ®å¯¹äºé¿å…ä¸å¿…è¦çš„è®¡ç®—å’Œ DOM æ“ä½œæ˜¯éå¸¸é‡è¦çš„ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€ä¸ªçš„äº‹ä»¶å¾ªç¯â€œtickâ€ä¸­ï¼ŒVue åˆ·æ–°é˜Ÿåˆ—å¹¶æ‰§è¡Œå®é™… (å·²å»é‡çš„) å·¥ä½œã€‚Vue åœ¨å†…éƒ¨å¯¹å¼‚æ­¥é˜Ÿåˆ—å°è¯•ä½¿ç”¨åŸç”Ÿçš„ Promise.thenã€MutationObserver å’Œ setImmediateï¼Œå¦‚æœæ‰§è¡Œç¯å¢ƒä¸æ”¯æŒï¼Œåˆ™ä¼šé‡‡ç”¨ setTimeout(fn, 0) ä»£æ›¿ã€‚

æ‰€ä»¥å¦‚æœä½ ç”¨ä¸€ä¸ªforå¾ªç¯æ¥åŠ¨æ€æ”¹å˜æ•°æ®100æ¬¡ï¼Œå…¶å®å®ƒåªä¼šåº”ç”¨æœ€åä¸€æ¬¡æ”¹å˜ï¼Œå¦‚æœæ²¡æœ‰è¿™ç§æœºåˆ¶ï¼ŒDOMå°±è¦é‡ç»˜100æ¬¡ï¼Œè¿™å›ºç„¶æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„å¼€é”€ã€‚

nextTickè§¦å‘çš„æ—¶æœºï¼š
ã€€
ï¼ˆ1ï¼‰åŒä¸€äº‹ä»¶å¾ªç¯ä¸­çš„ä»£ç æ‰§è¡Œå®Œæ¯• -> ï¼ˆ2ï¼‰DOM æ›´æ–° -> ï¼ˆ3ï¼‰nextTick callbackè§¦å‘

è§£å†³åŠæ³•ï¼š

```js
var vm = new Vue({
  el: '#example',
  data: {
    message: '123'
  }
})
vm.message = 'new message' // æ›´æ”¹æ•°æ®
//ä½¿ç”¨ Vue.nextTick(callback) callback å°†åœ¨ DOM æ›´æ–°å®Œæˆåè¢«è°ƒç”¨
Vue.nextTick(function () {
  vm.$el.textContent === 'new message' // true
  vm.$el.style.color = 'red' // æ–‡å­—é¢œè‰²å˜æˆçº¢è‰²
})
```

[è§](D:\Coding\frontend\Vue01\01-Vueåˆä½“éªŒ\test.html)

>[Vue æ•°æ®æ›´æ–°äº†ä½†é¡µé¢æ²¡æœ‰æ›´æ–°çš„ 7 ç§æƒ…å†µæ±‡æ€»åŠå»¶ä¼¸æ€»ç»“](https://segmentfault.com/a/1190000022772025)
>[Vue é¢è¯•çŸ¥è¯†ç‚¹æ€»ç»“ã€æŒç»­æ›´æ–°ä¸­ï½ã€‘](https://segmentfault.com/a/1190000019633325) çš„ 11ã€ä»€ä¹ˆæ˜¯$nextTick?


```html
<div id="example" > hello word </div>
123
false
``` 

#### 2
```js
var func1 = x => x
var func2 = x => {x}
var func3 = x => ({x})

func1(1)
func2(1)
func3(1)
```

æ³¨æ„è¿™é‡Œfunc2çš„å¤§æ‹¬å·è¢«å½“æˆç®­å¤´å‡½æ•°å‡½æ•°ä½“çš„æ‹¬å·äº†

```js
1 undefined {x:1}
```

#### 3

```js
var a = [1,2,3]
let d = {}
function b(c,d){
    c = []
    d.b = 2
    d = {a:1}
}
b(a,d)
console.log(a)  //[1,2,3]
console.log(d)  //{b: 2}
```

æ³¨æ„å‡½æ•°å†…çš„**å½¢å‚å’Œå¤–é¢çš„å®å‚ä¸æ˜¯ä¸€ä¸ªä¸œè¥¿**ï¼ˆæµ…æ‹·è´ï¼‰ã€‚
- å¦‚æœå®å‚æ˜¯**åŸºç¡€å€¼çš„è¯ï¼Œå½¢å‚å°±æ˜¯ä»–çš„æ‹·è´**ï¼ˆ**ä¹‹é—´ä¸å½±å“**ï¼Œæ²¡æœ‰ä»»ä½•å…³ç³»å“¦ï¼‰
- å¦‚æœæ˜¯å¼•ç”¨ç±»å‹çš„è¯ï¼Œå½¢å‚å°±æ˜¯ä»–åœ°å€çš„æ‹·è´

bä¸­ä¼ å…¥çš„a,dï¼ˆåœ°å€e.g. 0x00001ï¼‰ åˆ°å½¢å‚å˜æˆäº†c,dã€‚è€Œc,dä¿å­˜çš„æ˜¯a,dåœ°å€çš„å¤åˆ¶ã€‚

å½“å†™`c = []`æ—¶ï¼Œç›¸å½“äºç»™cèµ‹äºˆäº†æ–°çš„åœ°å€(c=0x00003)ï¼Œ**å¹¶æ²¡æœ‰ä¿®æ”¹å¤–é¢açš„æŒ‡å‘**ã€‚dä¹ŸåŒç†ï¼Œè€Œ`d.b = 2`èƒ½ç”Ÿæ•ˆæ˜¯å› ä¸ºæ­¤æ—¶dçš„åœ°å€è¿˜æ˜¯æŒ‡å‘å¤–é¢då¯¹åº”çš„åœ°å€ã€‚

#### 4 ï¼ï¼

```js
var a = function(){}
var b = [1,a]
console.log(JSON.stringify(a))
console.log(JSON.stringify({a}))
console.log(JSON.stringify({z:a}))
console.log(JSON.stringify(b))
```

- undefinedã€ä»»æ„çš„å‡½æ•°ä»¥åŠ symbol å€¼ï¼Œ**åœ¨åºåˆ—åŒ–è¿‡ç¨‹ä¸­ä¼šè¢«å¿½ç•¥**ï¼ˆå‡ºç°åœ¨éæ•°ç»„å¯¹è±¡çš„å±æ€§å€¼ä¸­æ—¶ï¼‰
- **æˆ–è€…è¢«è½¬æ¢æˆ null**ï¼ˆå‡ºç°åœ¨æ•°ç»„ä¸­æ—¶ï¼‰ã€‚
- å‡½æ•°ã€undefined è¢«å•ç‹¬è½¬æ¢æ—¶ï¼Œ**ä¼šè¿”å› undefined**ï¼Œå¦‚`JSON.stringify(function(){})` or `JSON.stringify(undefined)`.

æ€»ä¹‹å°±æ˜¯è¦å¿½ç•¥è¿™ä¸ªå‡½æ•°

Date æ—¥æœŸè°ƒç”¨äº† toJSON() å°†å…¶è½¬æ¢ä¸ºäº† string å­—ç¬¦ä¸²ï¼ˆåŒDate.toISOString()ï¼‰ï¼Œå› æ­¤ä¼šè¢«å½“åšå­—ç¬¦ä¸²å¤„ç†ã€‚

```js
undefined
{}
{}
[1,null]
```

#### 5 !
```js
function demo() {
    const now = Date.now();
    document.body.style.backgroundColor = 'red';
    while(Date.now() - now <= 2000) { continue; }
    document.body.style.backgroundColor = 'blue';
}

// ä¸å˜çº¢ï¼Œ 2såç›´æ¥å˜è“ï¼ˆJsçº¿ç¨‹é˜»å¡GUIçº¿ç¨‹ï¼‰
```

#### 6

aå’Œbçš„å®½åº¦æ˜¯å¤šå°‘
```html
<template>
    <div class="container">
        <div class="a"></div>
        <div class="b"></div>
    </div>
</template>

<style>
.container{
  display:flex;
  width:300px;
  height: 300px;
  background-color: bisque;
}
.a{
  flex:1;
  width:50px;
  background-color: brown;
}
.b{
  flex:2;
  width:50px;
  background-color: cyan;
}
</style>
```

**æ³¨æ„**
å¦‚æœå…ƒç´ ä¸ŠåŒæ—¶è®¾ç½®äº†widthå’Œflex-basisï¼Œé‚£ä¹ˆwidth çš„å€¼ä¼šè¢«flex-basisè¦†ç›–æ‰ã€‚widthä¼šå¤±æ•ˆã€‚

è¿™é‡Œä¸¤ä¸ªå®¹å™¨åˆ†åˆ«æ˜¯100px,200px;å› ä¸º**flexä¸­åŒ…å«flex-basisï¼Œè¦†ç›–äº†widthå±æ€§ã€‚**

å¦‚æœå†™ä½œ`flex-grow: 1; flex-grow: 2;` åˆ™åˆ†åˆ«ä¸º`50+(300-50-50)/3; 50+2*(300-50-50)/3`

---
å¦‚æœæŠŠcontainerçš„å®½åº¦æ”¹æˆ50px

åˆ™åˆ†åˆ«16.67px, 33.33px;
å› ä¸ºwidthå¤±æ•ˆï¼Œç›¸å½“**äºå®Œå…¨å–å†³äºflex-basis**,è€Œå…¶æ˜¯0ï¼›æ‰€ä»¥**æŒ‰æ¯”ä¾‹åˆ†é…**

---
å¦‚æœä¸¤ä¸ªéƒ½åŠ ä¸Š`flex-basis:50px`

åˆ™å„å 25px.
å› ä¸º`flex-shrink`é»˜è®¤ä¸º1ï¼›ä¼šæŒ‰æ¯”ä¾‹ç¼©å°

è®¾ç½®`flex-shrink:0`åˆ™éƒ½ä¸º50pxä¸æ¢è¡Œ

---
å¦‚æœå¦‚æœä¸¤ä¸ªéƒ½åŠ ä¸Š`flex-basis:50px`,çˆ¶å®¹å™¨åŠ ä¸Š`flex:wrap`
åˆ™æ¢è¡Œï¼Œä¸”ä¸¤ä¸ªå­å…ƒç´ å®½åº¦æ°¸è¿œç›¸åŒ

#### 7 flex-shrink

çˆ¶å®¹å™¨å®½500pxï¼Œæœ‰ä¸‰ä¸ªå…ƒç´ åˆ†åˆ«å®½200px,flex-shrinkåˆ†åˆ«ä¸º1ï¼Œ1ï¼Œ2ï¼Œæ±‚å­å…ƒç´ å®½åº¦
```
å¤šå‡ºå®½åº¦ï¼š 3*200-500=100

100*1/4 = 25
100*2/4 = 50
 
200-25=175
200-50=150
```
æ‰€ä»¥ä¸º 175ï¼Œ175ï¼Œ150